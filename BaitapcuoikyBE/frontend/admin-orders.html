<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n L√Ω ƒê∆°n H√†ng</title>
    <link rel="stylesheet" href="style.css">
    <script src="main.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>Danh S√°ch ƒê∆°n H√†ng</h2>
            <div>
                <a href="products.html" class="checkout-btn" style="background:#6c757d;text-decoration:none;font-size:14px;">S·∫£n Ph·∫©m</a>
                <button class="logout-btn" onclick="logout()">Tho√°t</button>
            </div>
        </div>
        <table>
            <thead><tr><th>M√£</th><th>Kh√°ch ID</th><th>Ng√†y t·∫°o</th><th>T·ªïng ti·ªÅn</th><th>Chi ti·∫øt</th></tr></thead>
            <tbody id="list"></tbody>
        </table>
    </div>
    <script>
    async function load() {
        const res = await apiGet("/orders");
        if(!res.ok) return;
        const data = await res.json();
        document.getElementById("list").innerHTML = data.map(o => {
            let details = o.orderDetails.map(d => `<div style="font-size:0.9em;color:#555;">- ${d.product?.name||'SP x√≥a'} x${d.quantity}: ${d.unitPrice.toLocaleString()}ƒë</div>`).join('');
            return `
            <tr style="background:#f9f9f9; border-top:2px solid #ccc;">
                <td><b>#${o.id}</b></td><td>${o.customerId}</td><td>${new Date(o.createdAt).toLocaleString()}</td>
                <td style="color:red;font-weight:bold">${o.totalPrice.toLocaleString()}ƒë</td>
                <td>Xem d∆∞·ªõi üëá</td>
            </tr>
            <tr><td colspan="5" style="padding-left:20px;">${details}</td></tr>`;
        }).join('');
    }
    load();
    </script>
</body>
</html>